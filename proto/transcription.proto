syntax = "proto3";
package AiService;

service Transcription {
	rpc TranscriptionBiStreams (stream DiscordOpusPacketList) returns (stream TranscribedText);
}

message VoiceAudio {
	string speaker_id = 1;
	bytes audio = 2;
}

message DiscordOpusPacket {
	int64 timestamp = 1;
	string speaker_id = 2;
	bytes data = 3;
}

message DiscordOpusPacketList {
	repeated DiscordOpusPacket packets = 1;
	bool is_final = 2;
}

message TranscribedText {
	int64 begin = 1;
	int64 end = 2;
	string speaker_id = 3;
	string text = 4;
}
